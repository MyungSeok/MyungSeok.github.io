(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{280:function(t,a,s){"use strict";s.r(a);var e=s(1),r=function(t){t.options.__data__block__={flowchart_382ee14a:"stage1=>operation: 검색 서비스\nstage2=>operation: 검색 시스템\nstage3=>operation: 검색 엔진\n\nstage1->stage2->stage3"}},n=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_01-검색-시스템-이해하기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-검색-시스템-이해하기","aria-hidden":"true"}},[t._v("#")]),t._v(" 01. 검색 시스템 이해하기")]),t._v(" "),s("h2",{attrs:{id:"_1-1-검색-시스템의-이해"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-검색-시스템의-이해","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1 검색 시스템의 이해")]),t._v(" "),s("h3",{attrs:{id:"_1-1-1-검색-시스템이란"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-검색-시스템이란","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1.1 검색 시스템이란?")]),t._v(" "),s("p",[t._v("사용자가 원하는 검색어에 대한 결과를 제공하는 서비스")]),t._v(" "),s("p",[t._v("검색 서비스 (Search Service) 는 검색 엔진을 기반으로 구축한 검색 시스템을 활용한 검색 결과를 서비스로 제공한다.")]),t._v(" "),s("FlowChart",{attrs:{id:"flowchart_382ee14a",code:t.$dataBlock.flowchart_382ee14a,preset:"vue"}}),s("h3",{attrs:{id:"_1-1-2-검색-시스템의-구성-요소"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-검색-시스템의-구성-요소","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1.2 검색 시스템의 구성 요소")]),t._v(" "),s("p",[t._v("검색 시스템의 기본 구조는 개발사에 따라 다르지만 기본 구조는 거의 같다.")]),t._v(" "),s("h4",{attrs:{id:"수집기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#수집기","aria-hidden":"true"}},[t._v("#")]),t._v(" 수집기")]),t._v(" "),s("ul",[s("li",[t._v("웹 사이트, 블로그, 카페 등 웹에서 정보를 수집하는 프로그램")]),t._v(" "),s("li",[t._v("크롤러 (Crawler), 스파이더 (Spider), 웜 (Warms), 웹 로봇 (Web Robots) 등으로 불리운다.")]),t._v(" "),s("li",[t._v("파일, 데이터베이스, 웹페이지등의 대부분의 정보가 수집 대상에 포함된다.")])]),t._v(" "),s("h4",{attrs:{id:"스토리지"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#스토리지","aria-hidden":"true"}},[t._v("#")]),t._v(" 스토리지")]),t._v(" "),s("ul",[s("li",[t._v("데이터 베이스에서 데이터를 저장하는 물리적인 저장소")]),t._v(" "),s("li",[t._v("검색엔진은 색인한 데이터를 스토리지에 보관한다.")])]),t._v(" "),s("h4",{attrs:{id:"색인기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#색인기","aria-hidden":"true"}},[t._v("#")]),t._v(" 색인기")]),t._v(" "),s("ul",[s("li",[t._v("사용자 질의와 일치하는 정보를 찾기위해 의미있는 용어를 추출하고 검색에 유리한 "),s("em",[s("strong",[t._v("역색인 구조로 데이터를 저장")])]),t._v(" 한다.")])]),t._v(" "),s("h4",{attrs:{id:"검색기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#검색기","aria-hidden":"true"}},[t._v("#")]),t._v(" 검색기")]),t._v(" "),s("ul",[s("li",[t._v("사용자 질의를 입력받아 색인기에서 저장한 역색인 구조에서 일치하는 문서를 찾아 결과로 반환한다.")]),t._v(" "),s("li",[t._v("사용하는 형태소 분석기에 따라 검색 품질이 달라진다.")])]),t._v(" "),s("h3",{attrs:{id:"_1-1-3-관계형-데이터베이스와의-차이점"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-관계형-데이터베이스와의-차이점","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1.3 관계형 데이터베이스와의 차이점")]),t._v(" "),s("p",[t._v("관계형 데이터스와의 유사한점은 질의와 일치하는 데이터를 찾아 사용자에게 제공한다는 점이다.")]),t._v(" "),s("h4",{attrs:{id:"검색-엔진과-데이터-베이스와-차이점"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#검색-엔진과-데이터-베이스와-차이점","aria-hidden":"true"}},[t._v("#")]),t._v(" 검색 엔진과 데이터 베이스와 차이점")]),t._v(" "),s("ul",[s("li",[t._v("비정형 데이터 색인 및 검색 가능")]),t._v(" "),s("li",[t._v("형태소 분석을 통해 사람이 구사하는 자연어의 처리가 가능")]),t._v(" "),s("li",[t._v("역색인 구조를 바탕으로 빠른 검색 속도를 보장")])]),t._v(" "),s("p",[t._v("엘라스틱에서 사용하는 용어와 관계형 데이터 베이스에서 사용하는 용어는 아래와 같은 차이점이 있다.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("Elastic Search")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("RDBMS")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("인덱스")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("데이터베이스")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("샤드")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("파티션")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("타입")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("테이블")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("문서")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("행")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("필드")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("열")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("매핑")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("스키마")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Query DSL")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("SQL")])])])]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("색인 (Index) & 역색인 (Inverted Index)")]),t._v(" "),s("p",[t._v("색인은 문서들에서 키워드를 뽑아내는 과정\n역색인은 어떠한 키워드에 대해 요청이 들어왔을때 뽑아낸 키워드를 바탕으로 키워드가 포함된 문서를 찾아내는 과정")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/A109.png",alt:"역색인"}})])]),t._v(" "),s("h2",{attrs:{id:"_1-2-검색-시스템과-엘라스틱"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-검색-시스템과-엘라스틱","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.2 검색 시스템과 엘라스틱")]),t._v(" "),s("h3",{attrs:{id:"_1-2-1-엘라스틱서치가-강력한-이유"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-엘라스틱서치가-강력한-이유","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.2.1 엘라스틱서치가 강력한 이유")]),t._v(" "),s("h4",{attrs:{id:"오픈소스-검색엔진"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#오픈소스-검색엔진","aria-hidden":"true"}},[t._v("#")]),t._v(" 오픈소스 검색엔진")]),t._v(" "),s("ul",[s("li",[t._v("루씬 기반의 오픈소스 검색 엔진")]),t._v(" "),s("li",[t._v("2억 5천만건의 다운로드 횟수")])]),t._v(" "),s("h4",{attrs:{id:"전문-검색"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#전문-검색","aria-hidden":"true"}},[t._v("#")]),t._v(" 전문 검색")]),t._v(" "),s("ul",[s("li",[t._v("기존 데이터 베이스의 기본적인 텍스트 검색 기능만 제공을 넘어선 고차원적인 전문검색 (Full Text) 을 지원")]),t._v(" "),s("li",[t._v("내용 전체를 색인해서 특정 단어가 포함된 문서를 검색하는 것")])]),t._v(" "),s("h4",{attrs:{id:"통계-분석"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#통계-분석","aria-hidden":"true"}},[t._v("#")]),t._v(" 통계 분석")]),t._v(" "),s("ul",[s("li",[t._v("비정형 로그 데이터를 수직하고 한곳에 모아 통계 분석을 수행 가능하다.")]),t._v(" "),s("li",[t._v("엘라스틱 서치와 키바나를 연결하여 실시간으로 쌓이는 로그를 시각화하고 분석 가능하다.")])]),t._v(" "),s("h4",{attrs:{id:"스키마-리스"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#스키마-리스","aria-hidden":"true"}},[t._v("#")]),t._v(" 스키마 리스")]),t._v(" "),s("ul",[s("li",[t._v("정형화 되어 있지 않는 다양한 형태의 문서도 자동으로 색인하고 검색 가능하다.")])]),t._v(" "),s("h4",{attrs:{id:"restful-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#restful-api","aria-hidden":"true"}},[t._v("#")]),t._v(" RESTful API")]),t._v(" "),s("ul",[s("li",[t._v("HTTP 기반의 RESTful API 를 지원하고 Request 뿐만이 아니라 Response 에도 JSON 형식을 사용한다.")])]),t._v(" "),s("h4",{attrs:{id:"멀티-테넌시"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#멀티-테넌시","aria-hidden":"true"}},[t._v("#")]),t._v(" 멀티 테넌시")]),t._v(" "),s("ul",[s("li",[t._v("서로 상이한 인덱스라도 검색할 필드명만 같으면 여러개의 인덱스를 한번에 조회가능한데 이를 이용하여 멀티테넌시 기능지원이 가능하다.")]),t._v(" "),s("li",[t._v("소프트웨어나 서비스를 여러 사람이 공유하여 사용할 수 있도록 서비스 해주는 것 (클라우드에서 많이 언급됨)")])]),t._v(" "),s("h4",{attrs:{id:"document-oriented"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#document-oriented","aria-hidden":"true"}},[t._v("#")]),t._v(" Document-Oriented")]),t._v(" "),s("ul",[s("li",[t._v("여러 계층의 JSON 형식의 구조화된 문서로 인덱스에 저장할 수 있다.")])]),t._v(" "),s("h4",{attrs:{id:"역색인-inverted-index"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#역색인-inverted-index","aria-hidden":"true"}},[t._v("#")]),t._v(" 역색인 (Inverted Index)")]),t._v(" "),s("ul",[s("li",[t._v("엘라스틱의 가장 큰 장점으로 키워드를 바탕으로 문서를 찾아내는 방법이다.")])]),t._v(" "),s("h4",{attrs:{id:"확장성과-가용성"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#확장성과-가용성","aria-hidden":"true"}},[t._v("#")]),t._v(" 확장성과 가용성")]),t._v(" "),s("ul",[s("li",[t._v("분산환경에서 데이터는 샤드 (Shard) 라는 작은 단위로 나뉘어 제공되며 인덱스를 만들때마다 샤드의 수를 조절할 수 있다.")]),t._v(" "),s("li",[t._v("데이터의 종류와 성격에 따라 분산하여 빠르게 처리 가능하다.")])]),t._v(" "),s("h3",{attrs:{id:"_1-2-2-엘라스틱-서치의-약점"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-엘라스틱-서치의-약점","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.2.2 엘라스틱 서치의 약점")]),t._v(" "),s("h4",{attrs:{id:"준-실시간-near-realtime"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#준-실시간-near-realtime","aria-hidden":"true"}},[t._v("#")]),t._v(" 준 실시간 (Near Realtime)")]),t._v(" "),s("ul",[s("li",[t._v("색인된 데이터는 1초 뒤에나 검색이 가능하다.")])]),t._v(" "),s("h4",{attrs:{id:"트랜잭션-및-롤백-제공-불가"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#트랜잭션-및-롤백-제공-불가","aria-hidden":"true"}},[t._v("#")]),t._v(" 트랜잭션 및 롤백 제공 불가")]),t._v(" "),s("ul",[s("li",[t._v("전체적인 클러스터의 성능 향상을 위함")])]),t._v(" "),s("h4",{attrs:{id:"데이터-업데이트-제공-안함"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#데이터-업데이트-제공-안함","aria-hidden":"true"}},[t._v("#")]),t._v(" 데이터 업데이트 제공 안함")]),t._v(" "),s("ul",[s("li",[t._v("업데이트 명령이 요청될 경우 기존 문서를 삭제하고 변경된 내용으로 새로운 문서를 생성")]),t._v(" "),s("li",[t._v("불면젹 (Immutable) 이라는 이점을 취득")])]),t._v(" "),s("h2",{attrs:{id:"_1-3-실습-환경-구축"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-실습-환경-구축","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.3 실습 환경 구축")]),t._v(" "),s("h3",{attrs:{id:"_1-3-1-엘라스틱서치-설치"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-엘라스틱서치-설치","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.3.1 엘라스틱서치 설치")]),t._v(" "),s("h4",{attrs:{id:"자바-설치"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#자바-설치","aria-hidden":"true"}},[t._v("#")]),t._v(" 자바 설치")]),t._v(" "),s("ul",[s("li",[t._v("JDK 1.8 이상을 확인")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ java -version\n")])])]),s("h4",{attrs:{id:"엘라스틱-서치-설치"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#엘라스틱-서치-설치","aria-hidden":"true"}},[t._v("#")]),t._v(" 엘라스틱 서치 설치")]),t._v(" "),s("p",[t._v("해당 문서 작성시 최신 버전 "),s("code",[t._v("elasticsearch-7.6.0")]),t._v(" 으로 설치")]),t._v(" "),s("h4",{attrs:{id:"엘라스틱-서치-실행과-중지"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#엘라스틱-서치-실행과-중지","aria-hidden":"true"}},[t._v("#")]),t._v(" 엘라스틱 서치 실행과 중지")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("// 해당 폴더로 이동\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cd")]),t._v(" elasticsearch-7.6.0/bin\n\n// 엘라스틱 파일을 실행\n$ ./elasticsearch\n")])])]),s("p",[s("a",{attrs:{href:"localhost:9020"}},[t._v("localhost:9020")]),t._v(" 경로로 진입하면 엘라스틱 서치의 클러스터 이름과 버전 정보가 노출")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyungSeokui-MacBook-Pro.local"')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cluster_name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"elasticsearch"')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cluster_uuid"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CjW9fYHLQOGkE6AEnp-PRg"')]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7.6.0"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build_flavor"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build_type"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tar"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build_hash"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7f634e9f44834fbc12724506cc1da681b0c3b1e3"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build_date"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2020-02-06T00:09:00.449973Z"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build_snapshot"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" false,\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lucene_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8.4.0"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"minimum_wire_compatibility_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6.8.0"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"minimum_index_compatibility_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6.0.0-beta1"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tagline"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"You Know, for Search"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("포그라운드로 떠있으며 "),s("code",[t._v("Ctrl")]),t._v(" + "),s("code",[t._v("C")]),t._v(" 로 중단시키면 된다.")]),t._v(" "),s("h4",{attrs:{id:"실습을-위한-엘라스틱서치-준비"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#실습을-위한-엘라스틱서치-준비","aria-hidden":"true"}},[t._v("#")]),t._v(" 실습을 위한 엘라스틱서치 준비")]),t._v(" "),s("p",[t._v("교재에 있는 "),s("a",{attrs:{href:"https://github.com/javacafe-project/elastic-book-snapshot/raw/master/book_backup.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("예제 인덱스 스냅샷"),s("OutboundLink")],1),t._v(" 다운로드")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://github.com/javacafe-project/elastic-book-snapshot/raw/master/book_backup.zip --no-check-certificate\n")])])]),s("p",[s("code",[t._v("config/elasticsearch.yml")]),t._v(" 을 하기와 같이 수정해준다.")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v('cluster.name: javacafe-cluster\nnode.name: javacafe-node1\nnetwork.host: 0.0.0.0\nhttp.port: 9200\ntransport.tcp.port: 9300\nnode.master: true\nnode.data: true\npath.repo: ["/Users/rrest/Downloads/book_backup/search_example", "/Users/rrest/Downloads/book_backup/agg_example"]\n')])])]),s("p",[t._v("상기 설정에서 "),s("code",[t._v("network.host: 0.0.0.0")]),t._v(" 은 제거해준다. ("),s("a",{attrs:{href:"https://linuxacademy.com/community/show/36639-elasticsearch-yml-changes-70/",target:"_blank",rel:"noopener noreferrer"}},[t._v("기동이 안됨"),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("p",[t._v("이후 교재에 나온 스냅샷을 엘라스틱 서치로 인식")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -XPUT "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:9200/_snapshot/javacafe'")]),t._v(" -d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{\n  "type": "fs",\n  "settings": {\n    "location": "/Users/rrest/Downloads/book_backup/search_example",\n    "compress": true\n  }\n}\'')]),t._v(" -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type: application/json'")]),t._v("\n")])])]),s("p",[t._v("기존 교재 예시에서 "),s("code",[t._v("-H 'Content-Type: application/json'")]),t._v(" 을 추가 (헤더가 별도로 필요함)")]),t._v(" "),s("p",[t._v("이후 생성된 아래 명령어를 통해 스냅샷을 확인")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X GET http://localhost:9200/_snapshot/javacafe/_all?pretty"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n")])])]),s("p",[t._v("두번째 스냅샷을 인식")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -XPUT "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:9200/_snapshot/javacafe'")]),t._v(" -d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{\n  "type": "fs",\n  "settings": {\n    "location": "/Users/rrest/Downloads/book_backup/agg_example",\n    "compress": true\n  }\n}\'')]),t._v(" -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type: application/json'")]),t._v("\n")])])]),s("h3",{attrs:{id:"_1-3-2-키바나-설치"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-키바나-설치","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.3.2 키바나 설치")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.elastic.co/kr/downloads/kibana",target:"_blank",rel:"noopener noreferrer"}},[t._v("키바나 다운로드 경로"),s("OutboundLink")],1),t._v("로 이동하여 키바나를 다운로드")]),t._v(" "),s("p",[t._v("이후 압축을 해제한 "),s("code",[t._v("config/kibana.yml")]),t._v(" 에 다음 내용을 설정")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("elasticsearch.url: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:9020"')]),t._v("\n")])])]),s("p",[t._v("교재에서는 위 설정으로 하라 했으나 "),s("a",{attrs:{href:"https://discuss.elastic.co/t/fatal-error-elasticsearch-url-definition-for-this-key-is-missing/191345",target:"_blank",rel:"noopener noreferrer"}},[t._v("동작이 되지 않아"),s("OutboundLink")],1),t._v(" 하기 설정으로 세팅")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("elasticsearch.hosts: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:9200"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("정상적으로 키바나 기동이 완료되면 "),s("a",{attrs:{href:"http://localhost:5601",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:5601"),s("OutboundLink")],1),t._v(" 경로로 접속")]),t._v(" "),s("p",[t._v("또한 키바나에서는 DEV_TOOLS 라는 도구를 통하여 문서의 매핑의 추가 삭제등의 작업을 JSON 포맷으로 요청 가능하다.")]),t._v(" "),s("p",[t._v("이는 "),s("a",{attrs:{href:"http://localhost:5601/app/kibana#/dev_tools",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:5601/app/kibana#/dev_tools"),s("OutboundLink")],1),t._v(" 경로로 접속")]),t._v(" "),s("h4",{attrs:{id:"예시"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#예시","aria-hidden":"true"}},[t._v("#")]),t._v(" 예시")]),t._v(" "),s("p",[s("code",[t._v("moive_kibana_execute")]),t._v(" 인덱스를 생성하여 문서를 색인해보자")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("PUT moive_kibana_execute/_doc/1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HelloWorld"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("하기와 같이 등록")]),t._v(" "),s("p",[s("img",{attrs:{src:"/img/A110.png",alt:"샘플 문서 등록"}})]),t._v(" "),s("p",[t._v("방금 생성한 문서를 검색")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("GET moive_kibana_execute/_search\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"query"')]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"match_all"')]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/img/A111.png",alt:"샘플 문서 검색"}})]),t._v(" "),s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("버전정보의 유의")]),t._v(" "),s("p",[t._v("Elastic Search 와 Kibana 의 버전을 통일시켜주는것이 좋다.\n간혹 Kibana 의 동작이 불안정하여 기동이 안되는 경우가 빈번하다.")])])],1)},[],!1,null,null,null);"function"==typeof r&&r(n);a.default=n.exports}}]);