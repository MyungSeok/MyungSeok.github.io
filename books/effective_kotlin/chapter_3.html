<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 3 재사용성 | 🌟 Sudal&#39;s gram</title>
    <meta name="description" content="정리공간">
    
    
    <link rel="preload" href="/assets/css/0.styles.128f439c.css" as="style"><link rel="preload" href="/assets/js/app.780da6cc.js" as="script"><link rel="preload" href="/assets/js/3.cdfcd112.js" as="script"><link rel="preload" href="/assets/js/143.7d2dfb48.js" as="script"><link rel="prefetch" href="/assets/js/10.0e7ffcec.js"><link rel="prefetch" href="/assets/js/100.120d13f5.js"><link rel="prefetch" href="/assets/js/101.1ae0164f.js"><link rel="prefetch" href="/assets/js/102.000e6b23.js"><link rel="prefetch" href="/assets/js/103.b7a3ab17.js"><link rel="prefetch" href="/assets/js/104.d769f6cc.js"><link rel="prefetch" href="/assets/js/105.d83c5a57.js"><link rel="prefetch" href="/assets/js/106.c151b58c.js"><link rel="prefetch" href="/assets/js/107.1b7b5dbd.js"><link rel="prefetch" href="/assets/js/108.516b6004.js"><link rel="prefetch" href="/assets/js/109.0570717d.js"><link rel="prefetch" href="/assets/js/11.79894829.js"><link rel="prefetch" href="/assets/js/110.4a01e49e.js"><link rel="prefetch" href="/assets/js/111.fff39680.js"><link rel="prefetch" href="/assets/js/112.640d72eb.js"><link rel="prefetch" href="/assets/js/113.4a133ad7.js"><link rel="prefetch" href="/assets/js/114.a3f93d1e.js"><link rel="prefetch" href="/assets/js/115.4313bfa5.js"><link rel="prefetch" href="/assets/js/116.51b8cb95.js"><link rel="prefetch" href="/assets/js/117.176f11ba.js"><link rel="prefetch" href="/assets/js/118.a072ef8e.js"><link rel="prefetch" href="/assets/js/119.3bcd4769.js"><link rel="prefetch" href="/assets/js/12.59e51b44.js"><link rel="prefetch" href="/assets/js/120.48fc6525.js"><link rel="prefetch" href="/assets/js/121.d8784b8c.js"><link rel="prefetch" href="/assets/js/122.8d2ce747.js"><link rel="prefetch" href="/assets/js/123.d5c4591b.js"><link rel="prefetch" href="/assets/js/124.522ba329.js"><link rel="prefetch" href="/assets/js/125.7ac02966.js"><link rel="prefetch" href="/assets/js/126.b7ff618d.js"><link rel="prefetch" href="/assets/js/127.a1908ce0.js"><link rel="prefetch" href="/assets/js/128.896d19c0.js"><link rel="prefetch" href="/assets/js/129.dbe825be.js"><link rel="prefetch" href="/assets/js/13.f4bdeb59.js"><link rel="prefetch" href="/assets/js/130.b3418c43.js"><link rel="prefetch" href="/assets/js/131.70e0ef97.js"><link rel="prefetch" href="/assets/js/132.c7307ccc.js"><link rel="prefetch" href="/assets/js/133.113fe7a2.js"><link rel="prefetch" href="/assets/js/134.515dfccf.js"><link rel="prefetch" href="/assets/js/135.015bd547.js"><link rel="prefetch" href="/assets/js/136.cb3d8e97.js"><link rel="prefetch" href="/assets/js/137.3b4ce63e.js"><link rel="prefetch" href="/assets/js/138.aa0d96bf.js"><link rel="prefetch" href="/assets/js/139.c8d42f3a.js"><link rel="prefetch" href="/assets/js/14.1c18a6d1.js"><link rel="prefetch" href="/assets/js/140.6998be3f.js"><link rel="prefetch" href="/assets/js/141.9f717ecc.js"><link rel="prefetch" href="/assets/js/142.7604fd94.js"><link rel="prefetch" href="/assets/js/144.509549d5.js"><link rel="prefetch" href="/assets/js/145.1831054c.js"><link rel="prefetch" href="/assets/js/146.3df8c02f.js"><link rel="prefetch" href="/assets/js/147.33938fc7.js"><link rel="prefetch" href="/assets/js/148.c5b08053.js"><link rel="prefetch" href="/assets/js/149.a5e6d40d.js"><link rel="prefetch" href="/assets/js/15.c2ca4bb0.js"><link rel="prefetch" href="/assets/js/150.7ebd6b68.js"><link rel="prefetch" href="/assets/js/151.38080f68.js"><link rel="prefetch" href="/assets/js/152.23ab3a2f.js"><link rel="prefetch" href="/assets/js/153.e5d1694a.js"><link rel="prefetch" href="/assets/js/154.b0b6ed7e.js"><link rel="prefetch" href="/assets/js/155.ea736026.js"><link rel="prefetch" href="/assets/js/156.48726fe3.js"><link rel="prefetch" href="/assets/js/157.99fc44e9.js"><link rel="prefetch" href="/assets/js/158.115d8151.js"><link rel="prefetch" href="/assets/js/159.b7e0e9e4.js"><link rel="prefetch" href="/assets/js/16.f6aec4de.js"><link rel="prefetch" href="/assets/js/160.7eed696c.js"><link rel="prefetch" href="/assets/js/161.db968cae.js"><link rel="prefetch" href="/assets/js/162.7bb88dda.js"><link rel="prefetch" href="/assets/js/163.8173a8eb.js"><link rel="prefetch" href="/assets/js/164.ac9e65c2.js"><link rel="prefetch" href="/assets/js/165.98392a73.js"><link rel="prefetch" href="/assets/js/166.302cfa22.js"><link rel="prefetch" href="/assets/js/167.0d0670be.js"><link rel="prefetch" href="/assets/js/168.33d04595.js"><link rel="prefetch" href="/assets/js/169.78fed30a.js"><link rel="prefetch" href="/assets/js/17.fb26b9e4.js"><link rel="prefetch" href="/assets/js/170.834fbd3c.js"><link rel="prefetch" href="/assets/js/171.e1708a93.js"><link rel="prefetch" href="/assets/js/172.22c5d39b.js"><link rel="prefetch" href="/assets/js/173.976dd676.js"><link rel="prefetch" href="/assets/js/174.92477ee5.js"><link rel="prefetch" href="/assets/js/175.c6c72240.js"><link rel="prefetch" href="/assets/js/176.ab946f3c.js"><link rel="prefetch" href="/assets/js/177.eb66c1cb.js"><link rel="prefetch" href="/assets/js/178.5d0e0ca7.js"><link rel="prefetch" href="/assets/js/179.13e8a4e0.js"><link rel="prefetch" href="/assets/js/18.ed618025.js"><link rel="prefetch" href="/assets/js/180.1d52ca15.js"><link rel="prefetch" href="/assets/js/181.70be4df3.js"><link rel="prefetch" href="/assets/js/182.e425a65c.js"><link rel="prefetch" href="/assets/js/183.799cfbbc.js"><link rel="prefetch" href="/assets/js/184.c8d086c1.js"><link rel="prefetch" href="/assets/js/185.485bbebb.js"><link rel="prefetch" href="/assets/js/186.6e2a13e0.js"><link rel="prefetch" href="/assets/js/187.5f8055e8.js"><link rel="prefetch" href="/assets/js/188.398c70ce.js"><link rel="prefetch" href="/assets/js/189.11eb1a08.js"><link rel="prefetch" href="/assets/js/19.d777a841.js"><link rel="prefetch" href="/assets/js/190.94552d72.js"><link rel="prefetch" href="/assets/js/191.f5a1c294.js"><link rel="prefetch" href="/assets/js/192.c9479fb7.js"><link rel="prefetch" href="/assets/js/193.c50f803d.js"><link rel="prefetch" href="/assets/js/194.cf06f46e.js"><link rel="prefetch" href="/assets/js/195.cfdc00c8.js"><link rel="prefetch" href="/assets/js/196.82198da1.js"><link rel="prefetch" href="/assets/js/197.6dba8c24.js"><link rel="prefetch" href="/assets/js/198.5b537879.js"><link rel="prefetch" href="/assets/js/199.3c214edb.js"><link rel="prefetch" href="/assets/js/20.29033988.js"><link rel="prefetch" href="/assets/js/200.15f316dd.js"><link rel="prefetch" href="/assets/js/201.c87efcfe.js"><link rel="prefetch" href="/assets/js/202.84293a1d.js"><link rel="prefetch" href="/assets/js/203.8e7f686f.js"><link rel="prefetch" href="/assets/js/204.f4d75aba.js"><link rel="prefetch" href="/assets/js/205.ea211ad4.js"><link rel="prefetch" href="/assets/js/206.ebe8acd3.js"><link rel="prefetch" href="/assets/js/207.c6f448e1.js"><link rel="prefetch" href="/assets/js/208.73b85137.js"><link rel="prefetch" href="/assets/js/209.0fd9919d.js"><link rel="prefetch" href="/assets/js/21.6bf0c251.js"><link rel="prefetch" href="/assets/js/210.3506b451.js"><link rel="prefetch" href="/assets/js/211.538cdef5.js"><link rel="prefetch" href="/assets/js/212.c347ccc2.js"><link rel="prefetch" href="/assets/js/213.e6434f5a.js"><link rel="prefetch" href="/assets/js/214.50a320d9.js"><link rel="prefetch" href="/assets/js/215.b14cf9f4.js"><link rel="prefetch" href="/assets/js/216.6a287109.js"><link rel="prefetch" href="/assets/js/217.8ce09762.js"><link rel="prefetch" href="/assets/js/218.022e0d05.js"><link rel="prefetch" href="/assets/js/219.6b4f8309.js"><link rel="prefetch" href="/assets/js/22.032b39e6.js"><link rel="prefetch" href="/assets/js/220.0b04b2fd.js"><link rel="prefetch" href="/assets/js/221.4d661009.js"><link rel="prefetch" href="/assets/js/222.1f5ddcac.js"><link rel="prefetch" href="/assets/js/223.13a37827.js"><link rel="prefetch" href="/assets/js/224.a31a7d9e.js"><link rel="prefetch" href="/assets/js/225.13af80b9.js"><link rel="prefetch" href="/assets/js/226.b9e1c788.js"><link rel="prefetch" href="/assets/js/227.495e57c8.js"><link rel="prefetch" href="/assets/js/228.09901083.js"><link rel="prefetch" href="/assets/js/229.016eb4ec.js"><link rel="prefetch" href="/assets/js/23.c29b5740.js"><link rel="prefetch" href="/assets/js/24.f536da55.js"><link rel="prefetch" href="/assets/js/25.885e4d9a.js"><link rel="prefetch" href="/assets/js/26.5858ad20.js"><link rel="prefetch" href="/assets/js/27.3363c44a.js"><link rel="prefetch" href="/assets/js/28.4c8ccfbe.js"><link rel="prefetch" href="/assets/js/29.456ee80f.js"><link rel="prefetch" href="/assets/js/30.37d4ab4e.js"><link rel="prefetch" href="/assets/js/31.afa0a9dc.js"><link rel="prefetch" href="/assets/js/32.1a805c30.js"><link rel="prefetch" href="/assets/js/33.1e952da8.js"><link rel="prefetch" href="/assets/js/34.5cc55318.js"><link rel="prefetch" href="/assets/js/35.99e9433d.js"><link rel="prefetch" href="/assets/js/36.bcf89a45.js"><link rel="prefetch" href="/assets/js/37.5feffb70.js"><link rel="prefetch" href="/assets/js/38.938e7c2c.js"><link rel="prefetch" href="/assets/js/39.4c14079c.js"><link rel="prefetch" href="/assets/js/4.69477812.js"><link rel="prefetch" href="/assets/js/40.496f41ff.js"><link rel="prefetch" href="/assets/js/41.718f2408.js"><link rel="prefetch" href="/assets/js/42.8cba06c1.js"><link rel="prefetch" href="/assets/js/43.ccccefc1.js"><link rel="prefetch" href="/assets/js/44.cfb33db1.js"><link rel="prefetch" href="/assets/js/45.11e7a35b.js"><link rel="prefetch" href="/assets/js/46.c42ad1fb.js"><link rel="prefetch" href="/assets/js/47.9130a048.js"><link rel="prefetch" href="/assets/js/48.781f6cf4.js"><link rel="prefetch" href="/assets/js/49.8bb2c598.js"><link rel="prefetch" href="/assets/js/5.4b7685e0.js"><link rel="prefetch" href="/assets/js/50.32746c06.js"><link rel="prefetch" href="/assets/js/51.e87bca07.js"><link rel="prefetch" href="/assets/js/52.452b6db6.js"><link rel="prefetch" href="/assets/js/53.8a5864a3.js"><link rel="prefetch" href="/assets/js/54.f13bd9d1.js"><link rel="prefetch" href="/assets/js/55.59339b56.js"><link rel="prefetch" href="/assets/js/56.763e77d5.js"><link rel="prefetch" href="/assets/js/57.43472596.js"><link rel="prefetch" href="/assets/js/58.5acea7cb.js"><link rel="prefetch" href="/assets/js/59.4c618203.js"><link rel="prefetch" href="/assets/js/6.4db5de31.js"><link rel="prefetch" href="/assets/js/60.9870a2a5.js"><link rel="prefetch" href="/assets/js/61.922e02e9.js"><link rel="prefetch" href="/assets/js/62.9ac49508.js"><link rel="prefetch" href="/assets/js/63.1cf26d58.js"><link rel="prefetch" href="/assets/js/64.f4d688da.js"><link rel="prefetch" href="/assets/js/65.49febfb6.js"><link rel="prefetch" href="/assets/js/66.494a8f51.js"><link rel="prefetch" href="/assets/js/67.7032e687.js"><link rel="prefetch" href="/assets/js/68.d306dd73.js"><link rel="prefetch" href="/assets/js/69.3d25c1b2.js"><link rel="prefetch" href="/assets/js/7.32b64445.js"><link rel="prefetch" href="/assets/js/70.bf8ac2b5.js"><link rel="prefetch" href="/assets/js/71.963a09e8.js"><link rel="prefetch" href="/assets/js/72.f0422002.js"><link rel="prefetch" href="/assets/js/73.3067af07.js"><link rel="prefetch" href="/assets/js/74.c825513a.js"><link rel="prefetch" href="/assets/js/75.4b398516.js"><link rel="prefetch" href="/assets/js/76.7eeab406.js"><link rel="prefetch" href="/assets/js/77.9ab5ddc4.js"><link rel="prefetch" href="/assets/js/78.a26327c5.js"><link rel="prefetch" href="/assets/js/79.300e7012.js"><link rel="prefetch" href="/assets/js/8.b396ab2f.js"><link rel="prefetch" href="/assets/js/80.dfb43f8f.js"><link rel="prefetch" href="/assets/js/81.d154a3b0.js"><link rel="prefetch" href="/assets/js/82.d79ddbcc.js"><link rel="prefetch" href="/assets/js/83.bcb27477.js"><link rel="prefetch" href="/assets/js/84.da747c75.js"><link rel="prefetch" href="/assets/js/85.ed51bc1c.js"><link rel="prefetch" href="/assets/js/86.ee0e9140.js"><link rel="prefetch" href="/assets/js/87.4278aa0f.js"><link rel="prefetch" href="/assets/js/88.3f5a3ec2.js"><link rel="prefetch" href="/assets/js/89.3798e731.js"><link rel="prefetch" href="/assets/js/9.3bec7e06.js"><link rel="prefetch" href="/assets/js/90.d4856012.js"><link rel="prefetch" href="/assets/js/91.a75e301f.js"><link rel="prefetch" href="/assets/js/92.542759cd.js"><link rel="prefetch" href="/assets/js/93.21444991.js"><link rel="prefetch" href="/assets/js/94.ccab2ac1.js"><link rel="prefetch" href="/assets/js/95.d836a87f.js"><link rel="prefetch" href="/assets/js/96.51d87fb1.js"><link rel="prefetch" href="/assets/js/97.7db072b0.js"><link rel="prefetch" href="/assets/js/98.20afd513.js"><link rel="prefetch" href="/assets/js/99.a82c121e.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.e29dbb94.js">
    <link rel="stylesheet" href="/assets/css/0.styles.128f439c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/A049.png" alt="🌟 Sudal's gram" class="logo"> <span class="site-name can-hide">🌟 Sudal's gram</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/general/" class="nav-link">General</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Front End</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/html/general/" class="nav-link">General</a></li><li class="dropdown-subitem"><a href="/frontend/html/performance.html" class="nav-link">Performance</a></li><li class="dropdown-subitem"><a href="/frontend/html/canvas.html" class="nav-link">Canvas</a></li></ul></li><li class="dropdown-item"><h4>CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/css.html" class="nav-link">Tips</a></li></ul></li><li class="dropdown-item"><h4>Javascript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/javascript/general/" class="nav-link">General</a></li><li class="dropdown-subitem"><a href="/frontend/javascript/reference/" class="nav-link">Reference</a></li><li class="dropdown-subitem"><a href="/frontend/javascript/performance/" class="nav-link">Performance</a></li></ul></li><li class="dropdown-item"><h4>Framework</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/framework/node/" class="nav-link">Node</a></li><li class="dropdown-subitem"><a href="/frontend/framework/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/frontend/framework/vue/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/frontend/framework/angular.html" class="nav-link">Angular</a></li></ul></li><li class="dropdown-item"><h4>Library</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/library/jquery.html" class="nav-link">jQuery</a></li><li class="dropdown-subitem"><a href="/frontend/library/d3.html" class="nav-link">D3</a></li><li class="dropdown-subitem"><a href="/frontend/library/three.html" class="nav-link">THREE</a></li><li class="dropdown-subitem"><a href="/frontend/library/graphql.html" class="nav-link">Graph QL</a></li></ul></li><li class="dropdown-item"><h4>Etc</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/etc/flux.html" class="nav-link">Flux</a></li><li class="dropdown-subitem"><a href="/frontend/etc/graphql.html" class="nav-link">Graph QL</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Back End</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Language</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/language/java/basic/" class="nav-link">Java</a></li><li class="dropdown-subitem"><a href="/backend/language/kotlin/" class="nav-link">Kotlin</a></li><li class="dropdown-subitem"><a href="/backend/language/php/" class="nav-link">PHP</a></li></ul></li><li class="dropdown-item"><h4>Server</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/server/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/backend/server/nginx/" class="nav-link">NGINX</a></li><li class="dropdown-subitem"><a href="/backend/server/tomcat/" class="nav-link">Tomcat</a></li></ul></li><li class="dropdown-item"><h4>Network</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/network/http/" class="nav-link">HTTP</a></li><li class="dropdown-subitem"><a href="/backend/network/security/" class="nav-link">Security</a></li><li class="dropdown-subitem"><a href="/backend/network/etc.html" class="nav-link">Etc</a></li></ul></li><li class="dropdown-item"><h4>Database</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/database/oracle/" class="nav-link">Oracle</a></li><li class="dropdown-subitem"><a href="/backend/database/mssql/" class="nav-link">MSSQL</a></li><li class="dropdown-subitem"><a href="/backend/database/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/backend/database/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/backend/database/etc.html" class="nav-link">Etc</a></li></ul></li><li class="dropdown-item"><h4>Framework</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/framework/spring/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/backend/framework/jpa/" class="nav-link">JPA</a></li><li class="dropdown-subitem"><a href="/backend/framework/security/" class="nav-link">Security</a></li><li class="dropdown-subitem"><a href="/backend/framework/etc.html" class="nav-link">Etc</a></li></ul></li><li class="dropdown-item"><h4>DevOps</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/devops/docker/" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/backend/devops/kubernetes.html" class="nav-link">Kubernetes</a></li><li class="dropdown-subitem"><a href="/backend/devops/git.html" class="nav-link">Git</a></li><li class="dropdown-subitem"><a href="/backend/devops/etc.html" class="nav-link">Etc</a></li></ul></li><li class="dropdown-item"><h4>Big Data</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/bigdata/dw.html" class="nav-link">DW</a></li><li class="dropdown-subitem"><a href="/backend/bigdata/analytics.html" class="nav-link">Analytics</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Books</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/effective_java_3rd/chapter_1.html" class="nav-link">Effective Java 3rd</a></li><li class="dropdown-item"><!----> <a href="/books/effective_kotlin/chapter_1.html" class="nav-link">Effective Kotlin</a></li><li class="dropdown-item"><!----> <a href="/books/js_high_performance.html" class="nav-link">자바스크립트 성능 최적화</a></li><li class="dropdown-item"><!----> <a href="/books/clean_architecture.html" class="nav-link">클린 아키텍처</a></li><li class="dropdown-item"><!----> <a href="/books/elastic_search_guide/chapter_1.html" class="nav-link">엘라스틱서치 실무 가이드</a></li><li class="dropdown-item"><!----> <a href="/books/mastering_akka/" class="nav-link">아카를 이용한 마이크로서비스 개발</a></li><li class="dropdown-item"><!----> <a href="/books/programming_in_scala/" class="nav-link">Programming in Scala 4/e</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/general/" class="nav-link">General</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Front End</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/html/general/" class="nav-link">General</a></li><li class="dropdown-subitem"><a href="/frontend/html/performance.html" class="nav-link">Performance</a></li><li class="dropdown-subitem"><a href="/frontend/html/canvas.html" class="nav-link">Canvas</a></li></ul></li><li class="dropdown-item"><h4>CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/css.html" class="nav-link">Tips</a></li></ul></li><li class="dropdown-item"><h4>Javascript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/javascript/general/" class="nav-link">General</a></li><li class="dropdown-subitem"><a href="/frontend/javascript/reference/" class="nav-link">Reference</a></li><li class="dropdown-subitem"><a href="/frontend/javascript/performance/" class="nav-link">Performance</a></li></ul></li><li class="dropdown-item"><h4>Framework</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/framework/node/" class="nav-link">Node</a></li><li class="dropdown-subitem"><a href="/frontend/framework/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/frontend/framework/vue/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/frontend/framework/angular.html" class="nav-link">Angular</a></li></ul></li><li class="dropdown-item"><h4>Library</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/library/jquery.html" class="nav-link">jQuery</a></li><li class="dropdown-subitem"><a href="/frontend/library/d3.html" class="nav-link">D3</a></li><li class="dropdown-subitem"><a href="/frontend/library/three.html" class="nav-link">THREE</a></li><li class="dropdown-subitem"><a href="/frontend/library/graphql.html" class="nav-link">Graph QL</a></li></ul></li><li class="dropdown-item"><h4>Etc</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontend/etc/flux.html" class="nav-link">Flux</a></li><li class="dropdown-subitem"><a href="/frontend/etc/graphql.html" class="nav-link">Graph QL</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Back End</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Language</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/language/java/basic/" class="nav-link">Java</a></li><li class="dropdown-subitem"><a href="/backend/language/kotlin/" class="nav-link">Kotlin</a></li><li class="dropdown-subitem"><a href="/backend/language/php/" class="nav-link">PHP</a></li></ul></li><li class="dropdown-item"><h4>Server</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/server/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/backend/server/nginx/" class="nav-link">NGINX</a></li><li class="dropdown-subitem"><a href="/backend/server/tomcat/" class="nav-link">Tomcat</a></li></ul></li><li class="dropdown-item"><h4>Network</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/network/http/" class="nav-link">HTTP</a></li><li class="dropdown-subitem"><a href="/backend/network/security/" class="nav-link">Security</a></li><li class="dropdown-subitem"><a href="/backend/network/etc.html" class="nav-link">Etc</a></li></ul></li><li class="dropdown-item"><h4>Database</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/database/oracle/" class="nav-link">Oracle</a></li><li class="dropdown-subitem"><a href="/backend/database/mssql/" class="nav-link">MSSQL</a></li><li class="dropdown-subitem"><a href="/backend/database/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/backend/database/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/backend/database/etc.html" class="nav-link">Etc</a></li></ul></li><li class="dropdown-item"><h4>Framework</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/framework/spring/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/backend/framework/jpa/" class="nav-link">JPA</a></li><li class="dropdown-subitem"><a href="/backend/framework/security/" class="nav-link">Security</a></li><li class="dropdown-subitem"><a href="/backend/framework/etc.html" class="nav-link">Etc</a></li></ul></li><li class="dropdown-item"><h4>DevOps</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/devops/docker/" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/backend/devops/kubernetes.html" class="nav-link">Kubernetes</a></li><li class="dropdown-subitem"><a href="/backend/devops/git.html" class="nav-link">Git</a></li><li class="dropdown-subitem"><a href="/backend/devops/etc.html" class="nav-link">Etc</a></li></ul></li><li class="dropdown-item"><h4>Big Data</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/bigdata/dw.html" class="nav-link">DW</a></li><li class="dropdown-subitem"><a href="/backend/bigdata/analytics.html" class="nav-link">Analytics</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Books</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/books/effective_java_3rd/chapter_1.html" class="nav-link">Effective Java 3rd</a></li><li class="dropdown-item"><!----> <a href="/books/effective_kotlin/chapter_1.html" class="nav-link">Effective Kotlin</a></li><li class="dropdown-item"><!----> <a href="/books/js_high_performance.html" class="nav-link">자바스크립트 성능 최적화</a></li><li class="dropdown-item"><!----> <a href="/books/clean_architecture.html" class="nav-link">클린 아키텍처</a></li><li class="dropdown-item"><!----> <a href="/books/elastic_search_guide/chapter_1.html" class="nav-link">엘라스틱서치 실무 가이드</a></li><li class="dropdown-item"><!----> <a href="/books/mastering_akka/" class="nav-link">아카를 이용한 마이크로서비스 개발</a></li><li class="dropdown-item"><!----> <a href="/books/programming_in_scala/" class="nav-link">Programming in Scala 4/e</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/books/effective_kotlin/chapter_1.html" class="sidebar-link">Chapter 1 안정성</a></li><li><a href="/books/effective_kotlin/chapter_2.html" class="sidebar-link">Chapter 2 가독성</a></li><li><a href="/books/effective_kotlin/chapter_3.html" class="active sidebar-link">Chapter 3 재사용성</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/books/effective_kotlin/chapter_3.html#item-19-knowledge-를-반복하여-사용하지-말라" class="sidebar-link">Item 19 knowledge 를 반복하여 사용하지 말라</a></li><li class="sidebar-sub-header"><a href="/books/effective_kotlin/chapter_3.html#item-20-일반적인-알고리즘을-반복해서-구현하지-말라" class="sidebar-link">Item 20 일반적인 알고리즘을 반복해서 구현하지 말라</a></li><li class="sidebar-sub-header"><a href="/books/effective_kotlin/chapter_3.html#item-21-일반적인-프로퍼티-패턴은-프로퍼티-위임으로-만들어라" class="sidebar-link">Item 21 일반적인 프로퍼티 패턴은 프로퍼티 위임으로 만들어라</a></li><li class="sidebar-sub-header"><a href="/books/effective_kotlin/chapter_3.html#item-22-일반적인-알고리즘을-구현할-때-제네릭을-사용하라" class="sidebar-link">Item 22 일반적인 알고리즘을 구현할 때 제네릭을 사용하라</a></li><li class="sidebar-sub-header"><a href="/books/effective_kotlin/chapter_3.html#item-23-타입-파라미터의-섀도잉을-피하라" class="sidebar-link">Item 23 타입 파라미터의 섀도잉을 피하라</a></li><li class="sidebar-sub-header"><a href="/books/effective_kotlin/chapter_3.html#item-24-제네릭-타입과-variance-한정자를-활용하라" class="sidebar-link">Item 24 제네릭 타입과 variance 한정자를 활용하라.</a></li><li class="sidebar-sub-header"><a href="/books/effective_kotlin/chapter_3.html#item-25-공통-모듈을-추출해서-여러-플랫폼에서-재사용하라" class="sidebar-link">Item 25 공통 모듈을 추출해서 여러 플랫폼에서 재사용하라</a></li></ul></li><li><a href="/books/effective_kotlin/chapter_4.html" class="sidebar-link">Chapter 4 추상화 설계</a></li><li><a href="/books/effective_kotlin/chapter_5.html" class="sidebar-link">Chapter 5 객체 생성</a></li><li><a href="/books/effective_kotlin/chapter_6.html" class="sidebar-link">Chapter 6 클래스 설계</a></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="chapter-3-재사용성"><a href="#chapter-3-재사용성" aria-hidden="true" class="header-anchor">#</a> Chapter 3 재사용성</h1> <p>재사용성은 그만큼의 힘이 있는 만큼 굉장히 위험할 수도 있다.</p> <blockquote><p>A 와 B에서 공통 부분을 추출한다면, 이후에 공통 부분을 수정할 일이 있을때 한꺼번에 수정할 수 있다.
하지만 A를 대상으로 수정한것이 B에서 문제가 될 수 있고, 그 반대로 B를 대상으로 수정한 것이 A에서 문제가 될 수 있다.</p></blockquote> <p>재사용성을 고려하는 일은 생각보다 어렵고, 다양한 오류를 발생시킬 수 있다.</p> <h2 id="item-19-knowledge-를-반복하여-사용하지-말라"><a href="#item-19-knowledge-를-반복하여-사용하지-말라" aria-hidden="true" class="header-anchor">#</a> Item 19 knowledge 를 반복하여 사용하지 말라</h2> <blockquote><p>프로젝트에서 이미 있던 코드를 복사/붙여넣기 하고 있다면, 무언가가 잘못된 것이다.</p></blockquote> <h3 id="knowledge"><a href="#knowledge" aria-hidden="true" class="header-anchor">#</a> knowledge</h3> <p>프로그래밍에서는 knowledge는 넓은 의미로 '의도적인 정보'를 뜻함</p> <p>우리가 사용하는 프로그램에서 knowledge 를 뽑는다면 다음 두가지로 나뉠수 있음</p> <ul><li>로직(logic): 프로그램이 어떠한 식으로 동작하는지 프로그램이 어떻게 보이는지</li> <li>공통 알고리즘(common algorithm): 원하는 동작을 하기 위한 알고리즘</li></ul> <p>위 둘의 가장 큰 차이점은 시간에 따른 변화이다.</p> <p><strong>비지니스 로직</strong>은 시간이 지나면서 계속 변하지만, <strong>공통 알고리즘</strong>은 한번 정의된 이후에는 크게 변하지 않는다.</p> <h3 id="모든-것은-변화한다"><a href="#모든-것은-변화한다" aria-hidden="true" class="header-anchor">#</a> 모든 것은 변화한다</h3> <p>프로그램에서 유일하게 유지되는 것은 '변화한다는 속성' 이다.</p> <p>오늘날의 대부분의 프로젝트는 몇 달마다 요구 사항과 내부적인 구조를 계쏙해서 변경한다.</p> <p>모든것은 변화하고 우리는 이에 대비해야 한다. 변화할 때 가장 큰 적은 knowledge가 반복되어 있는 부분이다.</p> <h4 id="버튼-디자인의-변경-건"><a href="#버튼-디자인의-변경-건" aria-hidden="true" class="header-anchor">#</a> 버튼 디자인의 변경 건</h4> <blockquote><p>프로젝트 여러 곳에서 사용되고 있는 범용적인 버튼이 있다.
그래픽 디자이너가 이 버튼 모양으로 변경해야 한다고 결정하였다.
이 버튼모양이 적용된 모든 부분을 하나하나 수정해야 한다.
또한 적용 과정에 실수한 부분을 찾기 위해 테스터에게 테스트를 요청해야 한다.</p></blockquote> <h4 id="데이터베이스-테이블-이름-변경-건"><a href="#데이터베이스-테이블-이름-변경-건" aria-hidden="true" class="header-anchor">#</a> 데이터베이스 테이블 이름 변경 건</h4> <blockquote><p>데이터베이스를 사용하는 프로젝트에서 테이블 이름을 변경해야 한다
이 테이블에 의존하고 있는 모든 SQL구문을 변경이 필요하다
혹시나 한 부서에서 이를 놓치고 있다면 매우 위험할 수 있다.</p></blockquote> <p>knowledge 반복이 얼마나 위험하고 문제가 있는지 알 수 있다.
knowledge 반복은 확장성(scalable)을 막고, 쉽게 깨지게(fragile) 만든다.</p> <p>개발자는 knowledge 반 복을 줄일 수 있는 도구와 기능들을 활용해야 한다.</p> <p>ORM(Object Relational Mapping), DAO(Data Access Object) 를 활용하는 방법이 있다.</p> <p>여러 추상화를 표현할 수 있는 수많은 솔루션이 있으며 이를 활용하면 반복을 줄일 수 있다.</p> <h3 id="언제-코드를-반복해도-될까"><a href="#언제-코드를-반복해도-될까" aria-hidden="true" class="header-anchor">#</a> 언제 코드를 반복해도 될까?</h3> <p>knowledge 를 추출하여 반복을 제거하는 경우, 올바르지(신중하지) 못한 추출은 변경을 더 어렵게 만든다.</p> <p>비지니스 규칙이 다른 곳(source) 에서 왔는지 확인하는 방법이 있다.
다른곳에서 왔다면, 독립적으로 변경될 가능성이 높다.</p> <p>단일 책임 원칙 (SRP: Single Responsibility Principle)을 활용하면 잘못된 코드 추출로 부터 보호할 수 있다.</p> <h3 id="단일-책임-원칙"><a href="#단일-책임-원칙" aria-hidden="true" class="header-anchor">#</a> 단일 책임 원칙</h3> <p>단일 책임 원칙이란 '클래스를 변경하는 이유는 단 한가지여야 한다(A class should have only one reason to change)'</p> <p>단일 책임이 알려주는 두가지 사실은 다음과 같다.</p> <ul><li>서로 다른 곳에서 사용하는 knowledge는 독립적으로 변경할 가능성이 많다.<br>비슷한 처리를 하더라도, 완전히 다른 knowledge로 취급하는 것이 좋다.</li> <li>다른 knowledge로 분리해두는 것이 좋다.<br>그렇지 않으면, 재사용해서 안되는 부분을 재사용하려는 유혹(위험)이 발생할 수 있다.</li></ul> <h3 id="정리"><a href="#정리" aria-hidden="true" class="header-anchor">#</a> 정리</h3> <p>모든것은 변화한다. 공통 knowledge가 있다면, 이를 추출해서 이러한 변화에 대비해야 한다.</p> <p>여러 요소에 비슷한 부분이 있는 경우, 변경이 필요할때 실수가 발행할 수 있는 부분은 추출하는것이 좋다.</p> <p>의도하지 않는 수정을 피하려면, 혹은 다른곳에서 조작하는 부분이 있다면 분리해서 사용하는 것이 좋다.</p> <h2 id="item-20-일반적인-알고리즘을-반복해서-구현하지-말라"><a href="#item-20-일반적인-알고리즘을-반복해서-구현하지-말라" aria-hidden="true" class="header-anchor">#</a> Item 20 일반적인 알고리즘을 반복해서 구현하지 말라</h2> <p>이미 있는 라이브러리 혹은 알고리즘을 활용하면 다음과 같은 이점이 있다.</p> <ul><li>코드 작성이 빨라진다.<br> 호출을 한번 하는것이 알고리즘을 만드는 시간 대비 빠르다.</li> <li>구현을 따로 하지 않아도, 함수의 이름을 보고 무엇을 하는지 확실하게 알 수 있다.</li> <li>직접 구현할 때 발생할 수 잇는 실수를 줄일수 있다.</li> <li>한번의 최적화로 이를 사용하는 모든 함수에서 동일한 최적화 혜택을 받을 수 있다.</li></ul> <h3 id="표준-라이브러리-살펴보기"><a href="#표준-라이브러리-살펴보기" aria-hidden="true" class="header-anchor">#</a> 표준 라이브러리 살펴보기</h3> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">saveCallResult</span><span class="token punctuation">(</span>item<span class="token operator">:</span> SourceResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> sourceList <span class="token operator">=</span> ArrayList<span class="token operator">&lt;</span>SourceEntity<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  item<span class="token punctuation">.</span>sources<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> sourceEntity <span class="token operator">=</span> <span class="token function">SourceEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    sourceEntity<span class="token punctuation">.</span>id <span class="token operator">=</span> it<span class="token punctuation">.</span>id
    sourceEntity<span class="token punctuation">.</span>category <span class="token operator">=</span> it<span class="token punctuation">.</span>category
    sourceEntity<span class="token punctuation">.</span>country <span class="token operator">=</span> it<span class="token punctuation">.</span>country
    sourceEntity<span class="token punctuation">.</span>description <span class="token operator">=</span> it<span class="token punctuation">.</span>description
    sourceEntity<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sourceEntity<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>위 형태보다는 팩토리 메서드를 활용하거나, 기본 생성자를 활용하는 것이 좋다.</p> <p>그래도 써야 겠다면 <code>.apply</code> 로 활용해서 모든 단일 객체들의 프로퍼티를 암묵적으로 설정하는 것이 좋다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">saveCallResult</span><span class="token punctuation">(</span>item<span class="token operator">:</span> SourceResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> srouceEntries <span class="token operator">=</span> item<span class="token punctuation">.</span>sources<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token operator">::</span>sourceToEntry<span class="token punctuation">)</span>
  db<span class="token punctuation">.</span><span class="token function">insertSources</span><span class="token punctuation">(</span>srouceEntries<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">sourceToEntry</span><span class="token punctuation">(</span>source<span class="token operator">:</span> Source<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">SourceEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
    id <span class="token operator">=</span> source<span class="token punctuation">.</span>id
    category <span class="token operator">=</span> source<span class="token punctuation">.</span>category
    country <span class="token operator">=</span> source<span class="token punctuation">.</span>country
    description <span class="token operator">=</span> source<span class="token punctuation">.</span>description
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="나만의-유틸리티-구현하기"><a href="#나만의-유틸리티-구현하기" aria-hidden="true" class="header-anchor">#</a> 나만의 유틸리티 구현하기</h3> <p>동일한 결과를 얻는 함수를 여러 번 만드는 것은 잘못된 일이다.</p> <p>모든 함수는 테스트되어야 하고, 기억되어야 하며, 유지보수되어야 한다.</p> <p>필요없는 함수를 중복해서 만들지 않게, 기존에 관련된 함수가 있는지 탐색하는 과정이 필요하다.</p> <div class="tip custom-block"><p class="custom-block-title">확장함수 (Extension Function)</p> <p>클래스를 확장하면서 새로운 함수들을 마치 외부 라이브러리 클래스가 제공하는 원래 함수인 것 마냥 사용할 수 있다.</p> <ul><li>수취인 타입(receiver type) : 확장 함수를 추가할 클래스</li> <li>수취인 객체(receiver object) : 확장 함수 내부를 구현할 때 receiver type 이 가지고 있는 인스턴스에 접근한 객체</li></ul> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">fun</span> Iterable<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">product</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> 
  <span class="token function">fold</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> acc<span class="token punctuation">,</span> i <span class="token operator">-&gt;</span> acc <span class="token operator">*</span> i <span class="token punctuation">}</span>
</code></pre></div><p>확장함수를 이용하여 만든 코드는 정적 바인딩이 된다.</p></div> <p>확장함수의 이점은 다음과 같다.</p> <ul><li>함수는 상태를 유지하지 않으므로, 행위를 나타내기 좋다.<br>특히 부수 효과(side-effect) 없는 경우 더 좋다.</li> <li>확장함수는 구체적인 타입이 잇는 객체에만 사용을 제한할 수 있으므로 좋다.</li> <li>수정할 객체를 아규먼트로 전달받아 사용하는 것보다는 확장 리시버로 사용하는 것이 가독성 측면에서 좋다.</li> <li>확장 함수는 객체에 정의한 함수보다 객체를 사용할 때, 자동 완성 기능등으로 제안이 이루어지므로 쉽게 찾을 수 있다.</li></ul> <h3 id="정리-2"><a href="#정리-2" aria-hidden="true" class="header-anchor">#</a> 정리</h3> <p>일반적인 알고리즘을 반복해서 만들지 말라.</p> <p>특정 알고리즘을 반복해서 사용해야 하는 경우에는 프로젝트 내부에 정의하라. 이러한 코드는 확장 함수로 정의하는 것이 좋다.</p> <h2 id="item-21-일반적인-프로퍼티-패턴은-프로퍼티-위임으로-만들어라"><a href="#item-21-일반적인-프로퍼티-패턴은-프로퍼티-위임으로-만들어라" aria-hidden="true" class="header-anchor">#</a> Item 21 일반적인 프로퍼티 패턴은 프로퍼티 위임으로 만들어라</h2> <p>코틀린에서는 코드 재사용과 관련해서 프로퍼티 위임기능을 제공한다.</p> <p>프로퍼티 위임을 사용하면 일반적인 프로퍼티의 행위를 추출해서 재사용할 수 있다.</p> <p>프로퍼티 위임은 클래스 위임과 비슷하게 프로퍼티 값의 <code>get</code>/<code>set</code> 위임을 사용할 수 있다.</p> <p><code>by</code> 키워드를 이용하여 위임할 객체를 프로퍼티 뒤에 명시한다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">import</span> kotlin<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>KProperty

<span class="token keyword">class</span> <span class="token function">PropertyDelegate</span><span class="token punctuation">(</span><span class="token keyword">var</span> value<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">getValue</span><span class="token punctuation">(</span>thisRef<span class="token operator">:</span> Any<span class="token operator">?</span><span class="token punctuation">,</span> property<span class="token operator">:</span> KProperty<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation"><span class="token delimiter variable">${</span>property<span class="token punctuation">.</span>name<span class="token delimiter variable">}</span></span> get value <span class="token interpolation"><span class="token delimiter variable">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> value
  <span class="token punctuation">}</span>

  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">setValue</span><span class="token punctuation">(</span>thisRef<span class="token operator">:</span> Any<span class="token operator">?</span><span class="token punctuation">,</span> property<span class="token operator">:</span> KProperty<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> newValue<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation"><span class="token delimiter variable">${</span>property<span class="token punctuation">.</span>name<span class="token delimiter variable">}</span></span> set value <span class="token interpolation"><span class="token delimiter variable">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token delimiter variable">}</span></span> -&gt; <span class="token interpolation variable">$newValue</span>&quot;</span><span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> newValue
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> Person <span class="token punctuation">{</span>
  <span class="token keyword">var</span> name<span class="token operator">:</span> String <span class="token keyword">by</span> <span class="token function">PropertyDelegate</span><span class="token punctuation">(</span><span class="token string">&quot;no name&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> age<span class="token operator">:</span> String <span class="token keyword">by</span> <span class="token function">PropertyDelegate</span><span class="token punctuation">(</span><span class="token string">&quot;31&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> person <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;person name is <span class="token interpolation"><span class="token delimiter variable">${</span>person<span class="token punctuation">.</span>name<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// person name is no name</span>

  person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;jin&quot;</span>

  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;person name is <span class="token interpolation"><span class="token delimiter variable">${</span>person<span class="token punctuation">.</span>name<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// person name is jin</span>

  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;person age is <span class="token interpolation"><span class="token delimiter variable">${</span>person<span class="token punctuation">.</span>age<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>    <span class="token comment">// person age is 31</span>
<span class="token punctuation">}</span>

</code></pre></div><p>코틀린의 <code>stdlib</code>는 lazy 프로퍼티 패턴을 쉽게 구현할 수 있게 lazy 함수를 제공한다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">getPostListFromServer</span><span class="token punctuation">(</span>id<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>Post<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;get big data from server&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> Post

<span class="token keyword">class</span> <span class="token function">Board</span><span class="token punctuation">(</span><span class="token keyword">val</span> id<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> list<span class="token operator">:</span> List<span class="token operator">&lt;</span>Post<span class="token operator">&gt;</span> <span class="token keyword">by</span> lazy <span class="token punctuation">{</span> <span class="token function">getPostListFromServer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> board <span class="token operator">=</span> <span class="token function">Board</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;lazy init board list :: <span class="token interpolation"><span class="token delimiter variable">${</span>board<span class="token punctuation">.</span>list<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span> <span class="token comment">// lazy init board list :: [Post@a09ee92]</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;board list :: <span class="token interpolation"><span class="token delimiter variable">${</span>board<span class="token punctuation">.</span>list<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span> <span class="token comment">// board list :: [Post@a09ee92]</span>
<span class="token punctuation">}</span>

<span class="token comment">// get big data from server</span>
<span class="token comment">// lazy init board list :: [Post@2f4d3709]</span>
<span class="token comment">// board list :: [Post@2f4d3709]</span>
</code></pre></div><p>프로퍼티 위임을 사용하면, 이외의 변화가 있을 때 이를 감지하는 observable 패턴을 쉽게 만들 수 있다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">var</span> items<span class="token operator">:</span> List<span class="token operator">&lt;</span>Item<span class="token operator">&gt;</span> <span class="token keyword">by</span> 
  Delegates<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span><span class="token function">listOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> _<span class="token punctuation">,</span> _<span class="token punctuation">,</span> _ <span class="token operator">-&gt;</span>
    <span class="token function">notifyDataSetChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token keyword">val</span> key<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token keyword">by</span> 
  Delegates<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> _<span class="token punctuation">,</span> old<span class="token punctuation">,</span> new <span class="token operator">-&gt;</span>
    Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;key changed from <span class="token interpolation variable">$old</span> to <span class="token interpolation variable">$new</span>&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>혹은 일정 조건을 만족하지 못하면 값 할당을 제한하는 거부권(vetoable)을 행사할 수 있다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">import</span> kotlin<span class="token punctuation">.</span>properties<span class="token punctuation">.</span>Delegates

<span class="token keyword">class</span> Person <span class="token punctuation">{</span>
    <span class="token comment">// 200살 이상은 값 오류로 판단 값 셋팅을 거부한다.</span>
    <span class="token keyword">var</span> age<span class="token operator">:</span> Int <span class="token keyword">by</span> Delegates<span class="token punctuation">.</span><span class="token function">vetoable</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> property<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue <span class="token operator">-&gt;</span>
        newValue <span class="token operator">&lt;</span> <span class="token number">200</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> person <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">31</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;person age is <span class="token interpolation"><span class="token delimiter variable">${</span>person<span class="token punctuation">.</span>age<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// person age is 31</span>

    person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">9999</span>                       <span class="token comment">// 거부됨</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;person age is <span class="token interpolation"><span class="token delimiter variable">${</span>person<span class="token punctuation">.</span>age<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// person age is 31</span>
<span class="token punctuation">}</span>

</code></pre></div><p>코틀린 <code>stdlib</code> 에서 다음과 같은 프로퍼티 델리게이터를 알아두면 좋다.</p> <ul><li>lazy</li> <li>Delegates.observable</li> <li>Delegates.vetoable</li> <li>Delegates.notNull</li></ul> <h3 id="정리-3"><a href="#정리-3" aria-hidden="true" class="header-anchor">#</a> 정리</h3> <p>프로퍼티 델리게이트는 프로퍼티와 관련된 다양한 조작을 할 수 있으며, 컨텍스트와 관련된 대부분의 ㅈ니다.</p> <p>이러한 특징을 이용해서 다양한 프로퍼티의 동작을 추출해서 재사용할 수 있다.</p> <p>이를 잘 활용하면 일반적인 패턴을 추출하거나 더 좋은 API 를 만들 때 활용할 수 있다.</p> <div class="tip custom-block"><p class="custom-block-title">참고자료</p> <p><a href="https://jinn-blog.tistory.com/27" target="_blank" rel="noopener noreferrer">https://jinn-blog.tistory.com/27<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h2 id="item-22-일반적인-알고리즘을-구현할-때-제네릭을-사용하라"><a href="#item-22-일반적인-알고리즘을-구현할-때-제네릭을-사용하라" aria-hidden="true" class="header-anchor">#</a> Item 22 일반적인 알고리즘을 구현할 때 제네릭을 사용하라</h2> <h3 id="제네릭-제한"><a href="#제네릭-제한" aria-hidden="true" class="header-anchor">#</a> 제네릭 제한</h3> <p>타입 파라미터의 중요한 기능 중 하나는 구체적인 타입의 서브타입만 사용하게 타입을 제한하는 기능이다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">:</span> Compareable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/*...*/</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token punctuation">,</span> C<span class="token operator">:</span> MutableCollection<span class="token operator">&lt;</span><span class="token keyword">in</span> T<span class="token operator">&gt;</span><span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">toCollection</span><span class="token punctuation">(</span>destination<span class="token operator">:</span> C<span class="token punctuation">)</span><span class="token operator">:</span> C <span class="token punctuation">{</span>
  <span class="token comment">/*...*/</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> ListAdapter<span class="token operator">&lt;</span>T<span class="token operator">:</span> ItemAdapter<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token comment">/*...*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*...*/</span> <span class="token punctuation">}</span>
</code></pre></div><p>타입에 제한이 걸리므로, 내부에서 해당 타입이 제공하는 메서드를 사용할 수 있다.</p> <h3 id="정리-4"><a href="#정리-4" aria-hidden="true" class="header-anchor">#</a> 정리</h3> <p>코틀린 자료형 시스템에서 타입 파라미터는 굉장히 중요한 부분이다.</p> <p>일반적으로 이를 사용해서 type-safe 제네릭 알고리즘과 제네릭 객체를 구현한다.</p> <p>또한 타입 파라미터는 구체 자료형(concrete type)의 서브타입을 제한할 수 있다.</p> <h2 id="item-23-타입-파라미터의-섀도잉을-피하라"><a href="#item-23-타입-파라미터의-섀도잉을-피하라" aria-hidden="true" class="header-anchor">#</a> Item 23 타입 파라미터의 섀도잉을 피하라</h2> <p>아래 코드 처럼 프로퍼티와 파라미터가 같은 이름을 가질 수 있다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">Forest</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">fun</span> <span class="token function">addTree</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>위와 같은 코드에서 외부에 있는 프로퍼티가 지역 파라미터에 의해 가려지게 되는데 이를 섀도잉(shadowing) 이라 부른다.</p> <h3 id="정리-5"><a href="#정리-5" aria-hidden="true" class="header-anchor">#</a> 정리</h3> <p>타입 파라미터의 섀도잉은 이해하기도 어렵기 때문에 반드시 피해야 한다.</p> <h2 id="item-24-제네릭-타입과-variance-한정자를-활용하라"><a href="#item-24-제네릭-타입과-variance-한정자를-활용하라" aria-hidden="true" class="header-anchor">#</a> Item 24 제네릭 타입과 variance 한정자를 활용하라.</h2> <p>다음과 같은 코드가 있다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">class</span> Cup<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>
</code></pre></div><p>여기서 타입 파라미터 <code>T</code> 는 <code>variance</code> 한정자(in 혹은 out)가 없으므로 invariant(불공변) 타입이다.</p> <p>invariant 타입은 제네릭 타입으로 만들어지는 타입들이 서로 관련이 없다.</p> <p>만약 어떠한 관련성을 원한다면 variance 한정자를 붙이며 <code>out</code> 은 타입 파라미터를 covariant(공변성) 타입으로 만든다.</p> <p><code>in</code> 은 타입 파라미터를 contravariant(반공변)으로 만든다.</p> <p><a href="/backend/language/java/essential/generic/pecs">PECS</a> 가 이 성격을 따른다.</p> <h3 id="함수-타입"><a href="#함수-타입" aria-hidden="true" class="header-anchor">#</a> 함수 타입</h3> <p>파라미터 유형과 리턴타입에 따라 서로 어떠한 관계를 갖는다.</p> <p><img src="/img/A135.png" alt="코틀린의 계층구조"></p> <p>위 그림에서 계층 구조의 아래로 가면, 타이핑 시스템 계층에서 파라미터 타입이 더 높은 타입으로 이동하고, 리턴 타입은 계층 구조의 더 낮은 타입으로 이동한다.</p> <p><img src="/img/A134.png" alt="코틀린의 타입계층"></p> <p>코틀린의 함수 타입의 모든 파라미터 타입은 contravariant 이다.</p> <p>모든 리턴 타입은 covariant 이다.</p> <p><img src="/img/A133.png" alt="코틀린의 in/out"></p> <h3 id="variance-한정자의-안정성"><a href="#variance-한정자의-안정성" aria-hidden="true" class="header-anchor">#</a> variance 한정자의 안정성</h3> <p>자바의 배열은 covariant 이다.</p> <p>다음 코드는 컴파일은 되나 런타임때 에러가 난다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> numbers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objects <span class="token operator">=</span> numbers<span class="token punctuation">;</span>
objects<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;B&quot;</span>            <span class="token comment">// Runtime Exception</span>
</code></pre></div><p>코틀린에서는 위와 같은 코드 결함을 해소하기 위해 Array(IntArray, CharArray 등)를 invariant 로 만들었다.</p> <p>파라미터 타입을 예측할 수 있다면, 어떤 서브타입이라도 전달할 수 있다.</p> <p>아래와 같이 아규먼트를 전달할 때, 암묵적으로 업캐스팅 할 수 있다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">open</span> <span class="token keyword">class</span> Dog
<span class="token keyword">class</span> Puppy<span class="token operator">:</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> Hound<span class="token operator">:</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">takeDog</span><span class="token punctuation">(</span>dog<span class="token operator">:</span> Dog<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">takeDog</span><span class="token punctuation">(</span><span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">takeDog</span><span class="token punctuation">(</span><span class="token function">Puppy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">takeDog</span><span class="token punctuation">(</span><span class="token function">Hound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>아래와 같은 상황은 안전하지 않다.</p> <p>캐스팅 후 실질적인 객체가 그대로 유지되고, 타이핑 시스템에서만 다르게 처리되기 때문이다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">class</span> Box<span class="token operator">&lt;</span><span class="token keyword">out</span> T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">var</span> value<span class="token operator">:</span> T<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>

  <span class="token comment">// 코틀린에서 불가능한 코드</span>
  <span class="token keyword">fun</span> <span class="token keyword">set</span><span class="token punctuation">(</span>value<span class="token operator">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value
  <span class="token punctuation">}</span>

  <span class="token keyword">fun</span> <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token operator">=</span> value <span class="token operator">?:</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Value not set&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">val</span> puppyBox <span class="token operator">=</span> Box<span class="token operator">&lt;</span>Puppy<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> dogBox<span class="token operator">:</span> Box<span class="token operator">&lt;</span>Dog<span class="token operator">&gt;</span> <span class="token operator">=</span> puppyBox
dogBox<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token function">Hound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                 <span class="token comment">// Puppy 만 가능</span>

<span class="token keyword">val</span> dogHouse <span class="token operator">=</span> Box<span class="token operator">&lt;</span>Dog<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> box<span class="token operator">:</span> Box<span class="token operator">&lt;</span>Any<span class="token operator">&gt;</span> <span class="token operator">=</span> dogHouse
box<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;Some string&quot;</span><span class="token punctuation">)</span>              <span class="token comment">// Dog 만 가능</span>
box<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span>                         <span class="token comment">// Dog 만 가능</span>
</code></pre></div><h3 id="variance-한정자-위치"><a href="#variance-한정자-위치" aria-hidden="true" class="header-anchor">#</a> variance 한정자 위치</h3> <p>varinace 한정자는 크게 두 위치에 사용할 수 있다.</p> <p>첫번째는 선언부로 일반적으로 이 위치에 사용된다.</p> <p>이는 클래스와 인터페이스가 사용되는 모든곳에 영향을 준다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">class</span> Box<span class="token operator">&lt;</span><span class="token keyword">out</span> T<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">val</span> value<span class="token operator">:</span> T<span class="token punctuation">)</span>
<span class="token keyword">val</span> boxStr<span class="token operator">:</span> Box<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">Box</span><span class="token punctuation">(</span><span class="token string">&quot;Str&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> boxAny<span class="token operator">:</span> Box<span class="token operator">&lt;</span>Any<span class="token operator">&gt;</span> <span class="token operator">=</span> boxStr
</code></pre></div><p>두번째는 클래스와 이터페이스를 활용하는 위치이다.</p> <p>이 위치에 variance 한정자를 사용하면 특정한 변수에만 variance 한정자가 적용된다.</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token keyword">class</span> Box<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">val</span> value<span class="token operator">:</span> T<span class="token punctuation">)</span>
<span class="token keyword">val</span> boxStr<span class="token operator">:</span> Box<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">Box</span><span class="token punctuation">(</span><span class="token string">&quot;Str&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> boxAny<span class="token operator">:</span> Box<span class="token operator">&lt;</span><span class="token keyword">out</span> Any<span class="token operator">&gt;</span> <span class="token operator">=</span> boxStr
</code></pre></div><h3 id="정리-6"><a href="#정리-6" aria-hidden="true" class="header-anchor">#</a> 정리</h3> <ul><li>타입 파라미터의 기본적인 동작은 invariant 타입이다.</li> <li>in 한정자는 타입 파라미터를 covariant 하게 만든다.</li> <li>out 한정자는 타입 파라미터를 contravariant 하게 만든다.</li> <li><code>List</code>와 <code>Set</code>의 타입 파라미터는 covariant(out 한정자)이고, <code>Array</code>, <code>MutableList</code>, <code>MutableSet</code>, <code>MutableMap</code> 타입 파라미터는 invariant(무공변) 이다.</li> <li>함수 타입의 파라미터 타입은 contravariant(in 한정자) 타입이고 리턴 타입은 covariant(out 한정자)타입이다.</li></ul> <h2 id="item-25-공통-모듈을-추출해서-여러-플랫폼에서-재사용하라"><a href="#item-25-공통-모듈을-추출해서-여러-플랫폼에서-재사용하라" aria-hidden="true" class="header-anchor">#</a> Item 25 공통 모듈을 추출해서 여러 플랫폼에서 재사용하라</h2> <p>TL;DR - 공통 모듈을 재사용하자</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/books/effective_kotlin/chapter_2.html" class="prev">
          Chapter 2 가독성
        </a></span> <span class="next"><a href="/books/effective_kotlin/chapter_4.html">
          Chapter 4 추상화 설계
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.780da6cc.js" defer></script><script src="/assets/js/3.cdfcd112.js" defer></script><script src="/assets/js/143.7d2dfb48.js" defer></script>
  </body>
</html>
